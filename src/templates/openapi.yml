swagger: "2.0"
info:
    title: "Grondexploitatie API"
    description: "Beschrijving grondexploitatie API"
    version: ""
host: {{ acc_prod_prefix }}api.data.amsterdam.nl
basePath: /grondexploitatie
schemes:
  - https
produces:
  - application/json
securityDefinitions:
  OAuth2:
    type: oauth2
    description: 'Authorization through datapunt Authorization service. Scopes start with GREX for this API'
    authorizationUrl: 'https://{{ acc_prod_prefix }}api.data.amsterdam.nl/oauth2/authorize'
    flow: implicit
    scopes:
      GREX/R: Read grondexploitatie
paths:
  /projects/:
    get:
      summary: List alle projecten
      description: Geef lijst van alle projecten waarvoor er baten zijn vanaf het 'start_jaar' Default is 'start_jaar' het huidige jaar
      security:
        - OAuth2:
            - GREX/R
      parameters:
        - name: start_jaar
          in: query
          description: Het eerste jaar vanaf waar er data is
          type: string
          pattern: '^[0-9]{4}$'
          required: false
      responses:
        '200':
          description: OK

  /project/{plannr}/:
    get:
      summary: Project details
      description: Toon details voor project met baten begroot per categorie vanaf 'start_jaar' Default is 'start_jaar' het huidige jaar Indien parameter 'use_period_groups' is meegegeven dan worden de bate niet alleen per categorie, maar ook per periode van vier jaar en het huidige jaar weergegeven
      security:
        - OAuth2:
            - GREX/R
      parameters:
        - name: plannr
          in: path
          required: true
          type: string
          pattern: '^[0-9]{5}$'
        - name: start_jaar
          in: query
          description: Het eerste jaar vanaf waar er data is.
          type: string
          pattern: '^[0-9]{4}$'
          required: false
        - name: use_period_groups
          in: query
          description: Toon resultaten in groepen voor 'start_jaar' en daarna groepen van 4 jaar
          type: boolean
          required: false
      responses:
        '200':
          description: >-
            Project details

            plannr
            plannaam
            startdatum
            planstatus
            geometry
            begroting
            prijspeildatum
            fase
            begroot

          schema:
            properties:
              plannr:
                type: integer
              plannaam:
                type: string
              startdatum:
                type: string
              planstatus:
                type: string
              geometry:
                type: object
              prijspeildatum:
                type: string
              fase:
                type: string
              begroot:
                type: object
                additionalProperties:
                  type: array
                  items:
                    type: object
                    properties:
                      start:
                        type: string
                      end:
                        type: string
                      begroot:
                        type: integer
