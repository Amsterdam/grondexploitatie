alter table planex add column plannr integer;
update planex set plannr = cast((regexp_matches("project_code", '^(\d{5})$'))[1] as integer);
create index plannr_idx on planex(plannr);
alter table planex rename column nw_begroot to nw_begroot_double;
alter table planex add column nw_begroot bigint;
alter table planex rename column prijspeildatum to prijspeildatum_old;
alter table planex add column prijspeildatum date;
update planex set nw_begroot = round(nw_begroot_double), prijspeildatum = to_date(prijspeildatum_old, 'DD-MM-YY');
alter table grex_grenzen alter column plannr type integer;
-- In the new version start_datum is  already a date type
-- alter table grex_grenzen rename column startdatum to startdatum_old;
-- alter table grex_grenzen add column startdatum date;
-- update grex_grenzen set startdatum = to_date(replace(startdatum_old, '/', ''), 'YYYYMMDD') where startdatum_old is not null and startdatum_old <> '';
SELECT UpdateGeometrySRID('grex_grenzen', 'wkb_geometry', 28992);
create view grex_grenzen_ogagis_2016 as select * from grex_grenzen;
